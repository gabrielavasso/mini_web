<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Miqueas & Gaby{% endblock %}</title>

    <!-- Fuentes rom√°nticas -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

    <!-- Estilos principales -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon">

    <!-- √çconos Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    {% block extra_head %}{% endblock %}
</head>
<body>

    <!-- Encabezado com√∫n -->
    <header>
        <h1 class="titulo-principal">Miqueas & Gaby</h1>
        <p class="subtitulo">Desde el 06/11/2022</p>
    </header>

    <!-- Contenido de cada p√°gina -->
    {% block content %}{% endblock %}

    <!-- Pie de p√°gina rom√°ntico -->
    <footer class="footer-romantico">
        <p>‚ú® Hecho con mucho amor por Gaby & Miqueas ‚ú®</p>
    </footer>

    <!-- Mensaje de cantidad de notitas si aplica -->
    {% if notas is defined and request.endpoint == 'ver_notitas' %}
    <p style="text-align: center; margin-top: 15px;">
        üìù Se han dejado {{ notas|length }} notitas de amor
    </p>
    {% endif %}

    <!-- Bot√≥n para volver si no estamos en index -->
    {% if request.endpoint != 'index' %}
    <a href="{{ url_for('index') }}" class="boton-volver">
        <i class="fas fa-heart"></i> Volver al comienzo
    </a>
    {% endif %}

    <!-- M√∫sica solo en index y si no est√° logueada -->
    {% if request.endpoint == 'index' and not session.get('logueado') %}
    <audio id="musica" autoplay loop>
        <source src="{{ url_for('static', filename='music/te_amo_tanto.mp3') }}" type="audio/mpeg">
        Tu navegador no soporta el audio HTML5.
    </audio>

    <button onclick="toggleMusica()" id="boton-musica" title="Silenciar / Activar">üîà</button>

    <style>
        #boton-musica {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            font-size: 22px;
            background-color: #d4af37; /* Dorado */
            color: #000;
            border: none;
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 9999;
        }
    </style>

    <script>
        const musica = document.getElementById('musica');
        const boton = document.getElementById('boton-musica');
        let estaSonando = true;

        function toggleMusica() {
            if (estaSonando) {
                musica.pause();
                boton.textContent = 'üîá';
            } else {
                musica.play();
                boton.textContent = 'üîà';
            }
            estaSonando = !estaSonando;
        }
    </script>
    {% endif %}

    {% if request.endpoint == 'index' %}
    <script src="{{ url_for('static', filename='js/heart.js') }}"></script>
    {% endif %}

</body>
</html>
