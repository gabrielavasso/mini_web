{% extends 'base.html' %}

{% block title %}√Ålbum: {{ carpeta }}{% endblock %}

{% block content %}
<main class="album-detalle">
    <h2 class="titulo-album">{{ carpeta }}</h2>

    <!-- Botones dentro del √°lbum -->
    {% if session.get('logueado') %}
    <div class="acciones-album">
        <form action="{{ url_for('upload') }}" method="POST" enctype="multipart/form-data" class="form-subir">
            <input type="hidden" name="carpeta" value="{{ carpeta }}">
            <input type="file" name="fotos" multiple required>
            <button type="submit" class="btn-subir">üì§ Subir Fotos</button>
        </form>
    </div>
    {% endif %}

    <!-- Fotos del √°lbum -->
    <div class="grid-fotos">
        {% if imagenes %}
            {% for foto in imagenes %}
            <div class="foto-item">
                <img src="{{ foto.url }}" alt="foto">

                {% if session.get('logueado') %}
                <form action="{{ url_for('eliminar_fotos') }}" method="POST" class="form-eliminar">
                    <input type="hidden" name="carpeta" value="{{ carpeta }}">
                    <input type="hidden" name="nombre" value="{{ foto.url }}">
                    <button type="submit" class="btn-eliminar">üóëÔ∏è</button>
                </form>
                {% endif %}
            </div>
            {% endfor %}
        {% else %}
            <p class="sin-fotos">No hay fotos en este √°lbum a√∫n.</p>
        {% endif %}
    </div>

    <!-- Bot√≥n volver -->
    <div class="volver-galeria">
        <a href="{{ url_for('galeria') }}" class="btn-volver">‚ù§Ô∏è Volver a la galer√≠a</a>
    </div>
</main>

<style>
.album-detalle {
    text-align: center;
    padding: 20px;
}

.titulo-album {
    font-size: 2rem;
    color: #d4af37;
    margin-bottom: 20px;
}

.acciones-album {
    margin-bottom: 20px;
}

.form-subir input[type="file"] {
    margin: 10px;
}

.btn-subir {
    background: #d4af37;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 10px;
    cursor: pointer;
}

.grid-fotos {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 15px;
}

.foto-item {
    position: relative;
}

.foto-item img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 10px;
    border: 2px solid #d4af37;
}

.form-eliminar {
    position: absolute;
    top: 5px;
    right: 5px;
}

.btn-eliminar {
    background: rgba(0,0,0,0.5);
    color: white;
    border: none;
    border-radius: 50%;
    padding: 5px 8px;
    cursor: pointer;
}

.volver-galeria {
    margin-top: 30px;
}

.btn-volver {
    background: #d4af37;
    color: white;
    padding: 10px 20px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: bold;
}
</style>
{% endblock %}
