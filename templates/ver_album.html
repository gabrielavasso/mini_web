{% extends 'base.html' %}

{% block title %}ğŸ“ {{ carpeta }}{% endblock %}

{% block content %}
<main class="fondo-ver-album">
    <h2 class="titulo-album">ğŸ“ Ãlbum: {{ carpeta }}</h2>

    <!-- Grid de fotos -->
    <div class="galeria-grid">
        {% for imagen in imagenes %}
        <img src="{{ url_for('ver_imagen', carpeta=carpeta, nombre=imagen) }}"
             alt="Imagen"
             class="foto-galeria"
             data-index="{{ loop.index0 }}">
        {% endfor %}
    </div>

    <!-- BotÃ³n para volver -->
    <div class="volver-centro">
        <a href="{{ url_for('galeria') }}" class="boton-volver-dorado">â† Volver a GalerÃ­a</a>
    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <button class="cerrar" onclick="cerrarLightbox()">âœ–</button>
        <img id="lightbox-img" src="" alt="Imagen ampliada">
        <button class="siguiente" onclick="siguienteImagen()">â¡ï¸</button>
    </div>
</main>

<script>
const imagenes = document.querySelectorAll('.foto-galeria');
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightbox-img');
let currentIndex = 0;

imagenes.forEach((img, index) => {
    img.addEventListener('click', () => {
        lightbox.classList.add('show');
        lightboxImg.src = img.src;
        currentIndex = index;
    });
});

function cerrarLightbox() {
    lightbox.classList.remove('show');
}

function siguienteImagen() {
    currentIndex = (currentIndex + 1) % imagenes.length;
    lightboxImg.src = imagenes[currentIndex].src;
}

document.addEventListener('keydown', (e) => {
    if (e.key === "Escape") cerrarLightbox();
});

lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) cerrarLightbox();
});
</script>
{% endblock %}
